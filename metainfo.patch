From b2d5117a9a9ee67fd8b959e0d60674001982a0af Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Bart=C5=82omiej=20Piotrowski?= <b@bpiotrowski.pl>
Date: Tue, 28 Jan 2020 10:26:07 +0100
Subject: [PATCH 1/3] Add metainfo file

---
 CMakeLists.txt          |  1 +
 res/julius.metainfo.xml | 32 ++++++++++++++++++++++++++++++++
 2 files changed, 33 insertions(+)
 create mode 100644 res/julius.metainfo.xml

diff --git a/CMakeLists.txt b/CMakeLists.txt
index f785a470..8fc5404d 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -743,6 +743,7 @@ else()
 
     if(UNIX AND NOT APPLE)
         install(FILES "res/julius.desktop" DESTINATION share/applications/)
+        install(FILES "res/julius.metainfo.xml" DESTINATION "share/metainfo" RENAME "com.github.bvschaik.julius.metainfo.xml")
         install(FILES "res/julius_48.png" DESTINATION "share/icons/hicolor/48x48/apps" RENAME "julius.png")
         install(FILES "res/julius_256.png" DESTINATION "share/icons/hicolor/256x256/apps" RENAME "julius.png")
         install(FILES "res/julius_512.png" DESTINATION "share/icons/hicolor/512x512/apps" RENAME "julius.png")
diff --git a/res/julius.metainfo.xml b/res/julius.metainfo.xml
new file mode 100644
index 00000000..5dbde7ca
--- /dev/null
+++ b/res/julius.metainfo.xml
@@ -0,0 +1,32 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<component type="desktop-application">
+	<id>com.github.bvschaik.julius</id>
+	<metadata_license>CC0-1.0</metadata_license>
+	<project_license>AGPL-3.0</project_license>
+	<name>Julius</name>
+	<summary>Julius is an open source re-implementation of Ceaser III</summary>
+	<description>
+		<p>Julius is an open source re-implementation of Caesar III.</p>
+		<p>The aim of this project is to create an open-source version of Caesar 3, with the same logic as the original, but with some UI enhancements, that is able to be played on multiple platforms. The same logic means that the saved games are 100% compatible, and any gameplay bugs present in the original Caesar 3 game will also be present in Julius.</p>
+		<ul>UI enhancements include:
+			<li>Support for widescreen resolutions</li>
+			<li>Windowed mode support for 32-bit desktops</li>
+			<li>Several small in-game quality of life improvements</li>
+		</ul>
+		<p>Julius requires the original assets (graphics, sounds, etc) from Caesar 3 to run. It optionally supports the high-quality MP3 files once provided on the Sierra website.</p>
+	</description>
+	<launchable type="desktop-id">com.github.bvschaik.julius.desktop</launchable>
+	<screenshots>
+		<screenshot type="default">
+			<image type="source">https://raw.githubusercontent.com/bvschaik/julius/master/res/sce_sys/livearea/contents/bg.png</image>
+		</screenshot>
+	</screenshots>
+	<releases>
+		<release version="1.2.0" date="2020-01-08"/>
+	</releases>
+	<url type="homepage">https://github.com/bvschaik/julius</url>
+	<developer_name>Bianca van Schaik</developer_name>
+	<content_rating type="oars-1.1">
+		<content_attribute id="violence-fantasy">moderate</content_attribute>
+	</content_rating>
+</component>

From b18282b9f77f2034bb62db7f917476a6f70f80f3 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Bart=C5=82omiej=20Piotrowski?= <b@bpiotrowski.pl>
Date: Tue, 28 Jan 2020 10:40:04 +0100
Subject: [PATCH 2/3] Rename desktop file and icons to reverse DNS during
 install

As described in FreeDesktop specification[1].

[1] https://specifications.freedesktop.org/desktop-entry-spec/latest/ar01s02.html
---
 CMakeLists.txt | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 8fc5404d..d58cc9c4 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -742,11 +742,11 @@ else()
     endif()
 
     if(UNIX AND NOT APPLE)
-        install(FILES "res/julius.desktop" DESTINATION share/applications/)
+        install(FILES "res/julius.desktop" DESTINATION "share/applications" RENAME "com.github.bvschaik.julius.desktop")
         install(FILES "res/julius.metainfo.xml" DESTINATION "share/metainfo" RENAME "com.github.bvschaik.julius.metainfo.xml")
-        install(FILES "res/julius_48.png" DESTINATION "share/icons/hicolor/48x48/apps" RENAME "julius.png")
-        install(FILES "res/julius_256.png" DESTINATION "share/icons/hicolor/256x256/apps" RENAME "julius.png")
-        install(FILES "res/julius_512.png" DESTINATION "share/icons/hicolor/512x512/apps" RENAME "julius.png")
+        install(FILES "res/julius_48.png" DESTINATION "share/icons/hicolor/48x48/apps" RENAME "com.github.bvschaik.julius.png")
+        install(FILES "res/julius_256.png" DESTINATION "share/icons/hicolor/256x256/apps" RENAME "com.github.bvschaik.julius.png")
+        install(FILES "res/julius_512.png" DESTINATION "share/icons/hicolor/512x512/apps" RENAME "com.github.bvschaik.julius.png")
     endif()
 
     # Unit tests

From 36c31a3f0c5d076ee13f17b672cd6f5c2f55d7ed Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Bart=C5=82omiej=20Piotrowski?= <b@bpiotrowski.pl>
Date: Tue, 28 Jan 2020 10:47:32 +0100
Subject: [PATCH 3/3] Point desktop file to correct icon

---
 res/julius.desktop | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/res/julius.desktop b/res/julius.desktop
index 92194c62..bc0d26a7 100644
--- a/res/julius.desktop
+++ b/res/julius.desktop
@@ -3,7 +3,7 @@
 Type=Application
 Version=1.0
 Exec=julius
-Icon=julius
+Icon=com.github.bvschaik.julius
 Name=Julius
 GenericName=Roman city management game
 Comment=Open Source re-implementation of Caesar 3.
